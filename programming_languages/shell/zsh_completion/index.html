<!doctype html><html lang="en"><title>exobrain | zsh completion</title><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1"><meta http-equiv="Cache-Control"content="no-cache, no-store, must-revalidate"><link rel="shortcut icon"href="/assets/img/logo.png"type="image/png"><meta http-equiv="Pragma"content="no-cache"><meta http-equiv="Expires"content="0"><link rel="stylesheet"href="/assets/style.css"><header class="nav-bar"><nav><a class="homelink"href="/">exobrain</a><div class="nav-right"><div class="nav-item"><a class="nav-link"href="/feed">[feed]</a></div><div class="nav-item"><a class="nav-link"href="/sitemap">[sitemap]</a></div><div class="nav-item"><a class="nav-link"href="https://sean.fish">back to my site</a></div></div></nav></header><main><div class="container"><div id="main-header"><div class="h1"id="main-title">zsh completion</div></div><p>For general tools which support a GNU-like <code>--help</code> flag, you can use the <code>_gnu_generic</code>, like:<pre><code>compdef _gnu_generic my_command ls youtube-dl</code></pre><p>Sometimes if the <code>--help</code> description is multiple lines, it doesn’t include the entire description or may break.<p>Theres a similar command in bash; <code>complete -F _longopt my_command</code><p><a href="https://github.com/zsh-users/zsh-completions/blob/master/zsh-completions-howto.org">This Tutorial</a>, and the corresponding <a href="https://github.com/zsh-users/zsh-completions">zsh-completions</a> is great for learning how to do zsh completion.<hr><h3 id="examples">Examples</h3><p>For basic completion which doesn’t need state, to autocomplete a command as the first argument, and then some filename as the second argument:<div class="sourceCode"id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"aria-hidden="true"></a><span class="kw">function</span><span class="fu"> _command()</span> <span class="kw">{</span></span>
<span id="cb2-2"><a href="#cb2-2"aria-hidden="true"></a>    <span class="co"># typically this would be done with the built-in _path_files</span></span>
<span id="cb2-3"><a href="#cb2-3"aria-hidden="true"></a>    <span class="bu">local</span> <span class="va">files=</span><span class="st">&quot;</span><span class="va">$(</span><span class="bu">command</span> ls<span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb2-4"><a href="#cb2-4"aria-hidden="true"></a>    <span class="co"># &#39;files&#39; and &#39;command&#39; are just descriptions</span></span>
<span id="cb2-5"><a href="#cb2-5"aria-hidden="true"></a>    <span class="ex">_arguments</span> <span class="kw">\</span></span>
<span id="cb2-6"><a href="#cb2-6"aria-hidden="true"></a>        <span class="st">&#39;1:command:(create remove)&#39;</span> <span class="kw">\</span></span>
<span id="cb2-7"><a href="#cb2-7"aria-hidden="true"></a>        <span class="st">&quot;2:files:(</span><span class="va">${files}</span><span class="st">)&quot;</span></span>
<span id="cb2-8"><a href="#cb2-8"aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div><p>If you want to have 2 commands and complete multiple arguments, you can use a glob:<div class="sourceCode"id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"aria-hidden="true"></a><span class="kw">function</span><span class="fu"> _command()</span> <span class="kw">{</span></span>
<span id="cb3-2"><a href="#cb3-2"aria-hidden="true"></a>    <span class="bu">local</span> <span class="va">files=</span><span class="st">&quot;</span><span class="va">$(</span><span class="bu">command</span> ls<span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb3-3"><a href="#cb3-3"aria-hidden="true"></a>    <span class="ex">_arguments</span> <span class="kw">\</span></span>
<span id="cb3-4"><a href="#cb3-4"aria-hidden="true"></a>        <span class="st">&#39;1:command:(create remove)&#39;</span> <span class="kw">\</span></span>
<span id="cb3-5"><a href="#cb3-5"aria-hidden="true"></a>        <span class="st">&#39;2:command:(force quiet)&#39;</span> <span class="kw">\</span></span>
<span id="cb3-6"><a href="#cb3-6"aria-hidden="true"></a>        <span class="st">&quot;*:files:(</span><span class="va">${files}</span><span class="st">)&quot;</span></span>
<span id="cb3-7"><a href="#cb3-7"aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div><p>e.g. <code>command create force file_one file_two</code><p><code>_arguments</code> is just one of the possible utility functions, there are a couple others.</div></main><footer><p><a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode"id="copyright">© 2020 Sean Breckenridge. Licensed under Creative Commons Attribution-ShareAlike.</a><br><a href="https://github.com/seanbreckenridge/exobrain">Source Code</a></footer><script src="/assets/main.js"></script>